<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.zz.HttpClient.Dao.MenuDao">
	
	<sql id="menuColumns">
		[ID],
		[PARENT_ID],
      	[TITLE],
      	[ICON],
      	[SORT],
      	[HREF],
      	[SPREAD],
      	[CREATE_DATE],
      	[UPDATE_TIME],
      	[UPDATE_BY],
      	[SYS_ID],
      	[REMARKS]
	</sql>
	
	<resultMap type="Menu" id="menuResultMap">
		<id property="id" column="ID" />
		<result property="parentId" column="PARENT_ID" />
		<collection property="children" column="ID" select="getMenuList"/>
	</resultMap>
	
	<select id="getTreeMenus" resultType="Menu">
		SELECT
		<include refid="menuColumns"/>
		FROM [Message].[dbo].[SYS_MENU]
		WHERE [PARENT_ID] = '1'
		ORDER BY [SORT]
	</select>
	
	<select id="getMenuList" resultMap="menuResultMap">
		SELECT
		<include refid="menuColumns"/>
		FROM [Message].[dbo].[SYS_MENU]
		WHERE [PARENT_ID] = #{parentId}
		ORDER BY [SORT]
	</select>
	
</mapper>